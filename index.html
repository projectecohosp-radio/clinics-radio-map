<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geospatial Health Broadcast</title>

<!-- MapmyIndia JavaScript SDK -->
<script src="https://apis.mapmyindia.com/advancedmaps/v1/d5e4f2a0e993e99f66f292fe796c6769/map_load?v=1.5"></script>

<style>
html, body, #map {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: system-ui, Arial, sans-serif;
}

/* Header */
.top-bar {
  padding: 10px 14px;
  background: #ffffff;
  border-bottom: 1px solid #eaeaea;
}
.top-bar h1 {
  margin: 0;
  font-size: 18px;
  color: #16325c;
}
.top-bar p {
  margin: 4px 0 0;
  font-size: 13px;
  color: #555;
}

/* Marker styles */
.pulse-green, .pulse-red {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid #ffffff;
  position: relative;
}
.pulse-green { background: #00b400; }
.pulse-red { background: #d31e1e; }
</style>
</head>

<body>

<div class="top-bar">
  <h1>Geospatial Health Broadcast</h1>
  <p>Patient Education & Public Health Awareness â€” Geo-mapped Clinic Broadcasts</p>
</div>

<div id="map"></div>

<script>
/* ================= MAP INIT ================= */
var map = new MapmyIndia.Map('map', {
  center: [23.5, 82.0],   // India center
  zoom: 5,
  zoomControl: true,
  hybrid: false
});

/* ================= CLINIC DATA ================= */
var clinics = [
  { id:"CR001", clinic:"Clinic 1", city:"Bengaluru", state:"Karnataka", lat:13.050391, lon:77.627325, status:"Non-Active" },
  { id:"CR009", clinic:"Clinic 9", city:"Ranchi", state:"Jharkhand", lat:23.389989, lon:85.06023, status:"Active" },
  { id:"CR047", clinic:"Clinic 47", city:"Trivandrum", state:"Kerala", lat:8.026895, lon:77.387473, status:"Active" },
  { id:"CR050", clinic:"Clinic 50", city:"Bhubaneswar", state:"Odisha", lat:20.271136, lon:85.659078, status:"Active" },
  { id:"CR060", clinic:"Clinic 60", city:"Coimbatore", state:"Tamil Nadu", lat:11.123285, lon:77.430725, status:"Active" }
];

/* ================= ADD MARKERS ================= */
clinics.forEach(function(cl) {

  var iconHTML =
    cl.status === "Active"
      ? '<div class="pulse-green"></div>'
      : '<div class="pulse-red"></div>';

  var marker = new MapmyIndia.Marker({
    map: map,
    position: { lat: cl.lat, lng: cl.lon },
    icon: {
      html: iconHTML,
      iconSize: [18,18],
      iconAnchor: [9,9]
    }
  });

  marker.addListener('click', function() {
    new MapmyIndia.InfoWindow({
      map: map,
      position: { lat: cl.lat, lng: cl.lon },
      content:
        "<strong>" + cl.id + "</strong><br>" +
        cl.clinic + "<br>" +
        cl.city + ", " + cl.state + "<br>" +
        "Status: " + cl.status
    });
  });
});
</script>

</body>
</html>
