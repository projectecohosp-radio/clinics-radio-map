<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Geospatial Health Broadcast</title>

<!-- MapmyIndia JS SDK -->
<script src="https://apis.mapmyindia.com/advancedmaps/v1/d5e4f2a0e993e99f66f292fe796c6769/map_load?v=1.5"></script>

<style>
html, body, #map {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: system-ui, Arial, sans-serif;
}

.top-bar {
  padding: 10px 14px;
  background: #ffffff;
  border-bottom: 1px solid #eaeaea;
}

.top-bar h1 {
  margin: 0;
  font-size: 18px;
  color: #16325c;
}

.top-bar p {
  margin: 4px 0 0;
  font-size: 13px;
  color: #555;
}

/* Pulsing markers */
.pulse-green, .pulse-red {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid #ffffff;
  position: relative;
}

.pulse-green { background: #00b400; }
.pulse-red { background: #d31e1e; }

.pulse-green::after, .pulse-red::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 100%;
  height: 100%;
  border-radius: 50%;
  animation: pulse 1.6s infinite;
}

.pulse-green::after { background: rgba(0,180,0,0.45); }
.pulse-red::after { background: rgba(220,30,30,0.45); }

@keyframes pulse {
  0% { transform: translate(-50%,-50%) scale(0.7); opacity: 0.9; }
  70% { transform: translate(-50%,-50%) scale(2.3); opacity: 0; }
  100% { opacity: 0; }
}
</style>
</head>

<body>

<div class="top-bar">
  <h1>Geospatial Health Broadcast</h1>
  <p>Patient Education & Public Health Awareness â€” Geo-mapped Clinic Broadcasts</p>
</div>

<div id="map"></div>

<script>
// ================= MAP INIT =================
var map = new MapmyIndia.Map('map', {
  center: [23.5, 82.0],   // India center
  zoom: 5,
  zoomControl: true,
  hybrid: false
});

// ================= DATA =================
var clinics = [
  { id:"CR001", clinic:"Clinic 1", city:"Bengaluru", state:"Karnataka", lat:13.050391, lon:77.627325, status:"Non-Active" },
  { id:"CR009", clinic:"Clinic 9", city:"Ranchi", state:"Jharkhand", lat:23.389989, lon:85.06023, status:"Active" },
  { id:"CR047", clinic:"Clinic 47", city:"Trivandrum", state:"Kerala", lat:8.026895, lon:77.387473, status:"Active" },
  { id:"CR050", clinic:"Clinic 50", city:"Bhubaneswar", state:"Odisha", lat:20.271136, lon:85.659078, status:"Active" },
  { id:"CR060", clinic:"Clinic 60", city:"Coimbatore", state:"Tamil Nadu", lat:11.123285, lon:77.430725, status:"Active" }
];

// ================= MARKERS =================
clinics.forEach(function(cl) {

  var iconHTML = (cl.status === "Active")
    ? '<div class="pulse-green"></div>'
    : '<div class="pulse-red"></div>';

  var marker = new MapmyIndia.Marker({
    map: map,
    position: { lat: cl.lat, lng: cl.lon },
    icon: {
      html: iconHTML,
      iconSize: [18,18],
      iconAnchor: [9,9]
    }
  });

  marker.addListener('click', function() {
    new MapmyIndia.InfoWindow({
      map: map,
      position: { lat: cl.lat, lng: cl.lon },
      content:
        "<strong>" + cl.id + "</strong><br>" +
        cl.clinic + "<br>" +
        cl.city + ", " + cl.state + "<br>" +
        "Status: " + cl.status
    });
  });

});
</script>

</body>
</html>
